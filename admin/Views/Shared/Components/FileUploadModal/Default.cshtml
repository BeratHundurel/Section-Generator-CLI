@model AdminFileUploadViewModel
@inject IUnitOfWork _uow

@{
    var fileId = Model.FileUploadEntity.FileId;
    var mediaId = Model.FileUploadEntity.MediaId;

    string fileInfo = "<span class='badge badge-light'>File non installato</span>";
    if (_uow.Media.CheckMedia(mediaId))
    {
        fileInfo = "<span class='badge badge-dark'>1 file trovato</span>";
    }
}
@if (Model.FileUploadEntity.IsSimple)
{
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupFileAddon01">@Model.AdminFileUploadModal.ModalTitle</span>
        </div>
        <div class="custom-file">
            <input class=" custom-file-input" type="file" name="basicFileUpload" data-id="@Model.FileUploadEntity.FileId" accept="@Model.FileUploadEntity.FileAccept">
            <label class="custom-file-label" for="inputGroupFile01">Dosya Seçin</label>
        </div>
    </div>
}
else
{
    <div class="file_upload__inbox">
        <button type="button" class="btn bg-admin-light media_modal__btn" data-toggle="modal">
            @Model.AdminFileUploadModal.ModalTitle
            @Html.Raw(fileInfo)
        </button>

        <!-- /.modal -->
        <div class="modal fade media_modal">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">@Model.AdminFileUploadModal.ModalTitle</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        @await Component.InvokeAsync("FileUploadInput", Model.FileUploadEntity)
                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Kapat</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>

    </div>
}
